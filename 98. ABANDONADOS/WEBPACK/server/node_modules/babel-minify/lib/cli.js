'use strict';

var _yargs = require('yargs');

var _yargs2 = _interopRequireDefault(_yargs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _ = require('./');

var _2 = _interopRequireDefault(_);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const print = msg => console.log('%s', msg); /**
                                              * CLI:
                                              * In progress
                                              */
/* TODO remove eslint-disable after complete */
/* eslint-disable */

const print_error = (msg, err) => console.log(msg, err);

const ARGS = _yargs2.default.usage('$0 input.js [options]').describe('babelrc', '').describe('conditionals', 'Optimizations for if-s and conditional expressions').describe('drop_console', 'Remove calls to console.* functions.').describe('drop_debugger', 'Remove debugger statements.').describe('m', 'Mangle names/pass mangler options.').describe('o', 'Output file (default STDOUT).').describe('V', 'Print version number and exit.').alias('m', 'mangle').alias('o', 'output').alias('V', 'version').string('mangle').boolean('babelrc').boolean('conditionals').boolean('drop_debugger').boolean('V').boolean('version').argv;

if (ARGS.version || ARGS.V) {
  const json = require('../package.json');
  print(json.name + ' ' + json.version);
  process.exit(0);
}

if (ARGS.h || ARGS.help) {
  print(_yargs2.default.usage());
  process.exit(0);
}

try {
  (0, _2.default)();
} catch (e) {
  print_error('Error minifying the code', e);
}